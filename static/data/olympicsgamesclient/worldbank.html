<!DOCTYPE html>
<html>
<head>
	<title>Death penalty in </title>



<script   src="https://code.jquery.com/jquery-1.12.4.min.js"   integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="   crossorigin="anonymous"></script>

<!-- own libraries -->
<script  src="/js/addCountry.js"></script>
<script  src="/js/getDataAjax.js"></script>



<!-- google libraries -->

<script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    




<script>

$(document).ready(function(){


      var request = $.ajax({
      url: '/api/v1/olympicsgames?apikey=multiPlan_C2_sos-2016-06-jern_ag',
      type:"GET",
      contentType: "application/json",
      
      
    });


      request.done(function(dataJson) {
          //console.log(dataJson)
          

    google.charts.load('current', { 'packages': ['map'] });
    google.charts.setOnLoadCallback(drawMap);



      function drawMap() {



        var dataresult = [["Country","Access to electricity (% of population)"]];
      
        $.addCountryArray(dataJson);//syn


      
        for (var i in dataJson){

            //search external API
            externalcountrydata= $.getDataAjax("GET","/countries/"+dataJson[i].code+"/indicators/TX.VAL.TECH.MF.ZS?date=2014&format=json"); //syn


            item = dataJson[i];
           
           var itemforwidget = [item.country, item.country+": "+ externalcountrydata[1][0].value] //find by tree (only 1 object)
           dataresult.push(itemforwidget)

      }

        console.log(dataresult)



        var data = google.visualization.arrayToDataTable(dataresult);

        var options = { showTip: true };

        var map = new google.visualization.Map(document.getElementById('chart_div'));

        map.draw(data, options);
      }


      
          

    } );
//enddocument

     });  


</script>





</head>
<body>

<h1>Access to electricity (% of population) in olympics games cities</h1>

<div id="chart_div" style="min-width: 310px; height: 400px; max-width: 800px; margin: 0 auto"></div>
</body>
</html>