<html>
<head>
<!-- -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">

  
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script>

$(document).ready(function () {

    var request = $.ajax({
      url: '/api/v1/olympicsgames?apikey=user',
      type:"GET",
      contentType: "application/json",
      
      
    });



    request.done(function(dataJson) {

//sum 

var sum = 0

for (var i in dataJson){
    sum += dataJson[i].athletes
    
}



//Create data 

arraydata =[]


for (var i in dataJson){
    item = { name: dataJson[i].city+dataJson[i].year,
        y: (dataJson[i].athletes/sum)*100

    }
    arraydata.push(item)
    

}

console.log(arraydata)



$('#container').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            title: {
                text: 'Pie Chart spainish athletes in Olympics Games'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                name: 'Athletes',
                colorByPoint: true,
                data: arraydata
            }]
        });





    }
    );//end request

        // Build the chart
        
    });

</script>








</head>







<body>
  <nav class="red darken-2" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="/" class="brand-logo">sos-2016-06</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/about">About us</a></li>
      </ul>

      
    </div>
  </nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <div class="row center">
        <a href="/olympicsgames/" id="download-button" class="btn-large waves-effect waves-light red">Back to Home</a>
        <a href="/olympicsgames/charts" id="download-button" class="btn-large waves-effect waves-light red">Google chart</a>
        <a href="/olympicsgames/charts/d3.html" id="download-button" class="btn-large waves-effect waves-light red">D3 </a>
      </div>
      <br><br>

    </div>
  </div>


  <div class="container">
    <div class="section">

      <!--   Icon Section   -->
      
<div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
       


       
      </div>

    </div>
    <br><br>

    <div class="section">

    </div>
  </div>

  <footer class="page-footer grey lighten-1">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Bio</h5>
          <p class="grey-text text-lighten-4">
            This is views about my educational API. 
          </p>


        </div>

        <div class="col l3 s12">
          
        </div>

        
        <div class="col l3 s12">
          <h5 class="white-text">Connect</h5>
          <ul>
            <li><a class="white-text" href="https://twitter.com/quiqueruizna">Twitter</a></li>
            
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="black-text text-lighten-3" href="http://systerminal.com">Jose Enrique Ruiz Navarro</a>
      </div>
    </div>
  </footer>




  </body>
</html>
